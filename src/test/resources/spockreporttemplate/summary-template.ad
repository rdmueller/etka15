<%
println "entering summary-template"
%>= Spock Test Results
// toc-title definition MUST follow document title without blank line!
:toc-title: Table of Contents
:icons: font

// numbering from here on
:numbered:

<% def stats = com.athaydes.spockframework.report.util.Utils.aggregateStats( data )
 %>== Specification run results

=== Specifications summary

[small]#created on ${new Date()} by ${System.properties['user.name']}#

.summary
[options="header"]
|==================================================================================================================================
| Total          | Passed          | Failed          | Feature failures | Feature errors   | Success rate        | Total time (ms) 
| ${stats.total} | ${stats.passed} | ${stats.failed} | ${stats.fFails}  | ${stats.fErrors} | ${stats.successRate}| ${stats.time}   
|==================================================================================================================================

=== Specifications

[options="header"]
|===================================================================
|Name  | Features | Failed | Errors | Skipped | Success rate | Time 
<% data.each { name, map ->
 %>| $name | ${map.totalRuns} | ${map.failures} | ${map.errors} | ${map.skipped} | ${map.successRate} | ${map.time} 
<% } %>
|===================================================================


<% data.each { name, map ->
 %>
<<<<

include::${name}.ad[]
<% } %>

[small]#generated by ${com.athaydes.spockframework.report.SpockReportExtension.PROJECT_URL}[Athaydes Spock Reports] together with asciidoc Geb Template#